version: '3.8'

services:
  ultimata-server-dev:
    build:
      context: .
      dockerfile: Dockerfile.dev
    container_name: ultimata-server-dev
    ports:
      - "8099:8099"
    environment:
      - SERVER_PORT=8099
      - MAX_PLAYERS=50
      - LOG_LEVEL=DEBUG
    # Mount source code for development
    volumes:
      - ./src:/app/src:ro
      - ./CMakeLists.txt:/app/CMakeLists.txt:ro
      - ./build:/app/build:rw
      - ./logs:/app/logs:rw
    # Working directory
    working_dir: /app
    # Keep container running for development
    command: tail -f /dev/null
    networks:
      - ultimata-dev-network
    # For development, run as root to avoid permission issues
    user: root

networks:
  ultimata-dev-network:
    driver: bridge